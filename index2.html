<!DOCTYPE html>
<html lang="en">

<head>
    <title>jQuery WeUI</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
            ">

    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.0/css/jquery-weui.min.css">
    <!-- <link rel="stylesheet" href="css/demos.css"> -->

</head>

<body ontouchstart="">

    <header class="demos-header">
        <h1 class="demos-title">购物车</h1>
    </header>

    <div class="demos-content-padded">
        <article class="weui-article">
            <p>这是一个购物车的模板，可以参考这个模板完成你自己的购物车。支持：</p>
            <ul>
                <li>可以加减数量</li>
                <li>可以滑动删除</li>
            </ul>
            <a href="javascript:;" class="weui-btn weui-btn_primary open-popup" data-target="#cart">打开购物车</a>
        </article>
    </div>

    <div id="cart" class="weui-popup__container popup-bottom">
        <div class="weui-popup__overlay"></div>
        <div class="weui-popup__modal">
            <div class="toolbar">
                <div class="toolbar-inner">
                    <a href="javascript:;" class="picker-button close-popup">关闭</a>
                    <h1 class="title">我的购物车</h1>
                </div>
            </div>
            <div class="modal-content">
                <div class="weui-cells">
                    <div class="weui-cell weui-cell_swiped">
                        <div class="weui-cell__bd">
                            <div class="weui-cell">
                                <div class="weui-cell__hd">
                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAAVFBMVEXx8fHMzMzr6+vn5+fv7+/t7e3d3d2+vr7W1tbHx8eysrKdnZ3p6enk5OTR0dG7u7u3t7ejo6PY2Njh4eHf39/T09PExMSvr6+goKCqqqqnp6e4uLgcLY/OAAAAnklEQVRIx+3RSRLDIAxE0QYhAbGZPNu5/z0zrXHiqiz5W72FqhqtVuuXAl3iOV7iPV/iSsAqZa9BS7YOmMXnNNX4TWGxRMn3R6SxRNgy0bzXOW8EBO8SAClsPdB3psqlvG+Lw7ONXg/pTld52BjgSSkA3PV2OOemjIDcZQWgVvONw60q7sIpR38EnHPSMDQ4MjDjLPozhAkGrVbr/z0ANjAF4AcbXmYAAAAASUVORK5CYII="
                                        alt="" style="width:20px;margin-right:5px;display:block">
                                </div>
                                <div class="weui-cell__bd">
                                    <p>清风纸巾12包装</p>
                                </div>
                                <div class="weui-cell__ft">
                                    <span class="price">￥24.00</span>
                                    <div class="weui-count">
                                        <a class="weui-count__btn weui-count__decrease"></a>
                                        <input class="weui-count__number" type="number" value="1" style="width:1.5rem">
                                        <a class="weui-count__btn weui-count__increase"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="weui-cell__ft">
                            <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout" href="javascript:">删除</a>
                            <a class="weui-swiped-btn weui-swiped-btn_default close-swipeout" href="javascript:">关闭</a>
                        </div>
                    </div>
                    <div class="weui-cell weui-cell_swiped">
                        <div class="weui-cell__bd">
                            <div class="weui-cell">
                                <div class="weui-cell__hd">
                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAAVFBMVEXx8fHMzMzr6+vn5+fv7+/t7e3d3d2+vr7W1tbHx8eysrKdnZ3p6enk5OTR0dG7u7u3t7ejo6PY2Njh4eHf39/T09PExMSvr6+goKCqqqqnp6e4uLgcLY/OAAAAnklEQVRIx+3RSRLDIAxE0QYhAbGZPNu5/z0zrXHiqiz5W72FqhqtVuuXAl3iOV7iPV/iSsAqZa9BS7YOmMXnNNX4TWGxRMn3R6SxRNgy0bzXOW8EBO8SAClsPdB3psqlvG+Lw7ONXg/pTld52BjgSSkA3PV2OOemjIDcZQWgVvONw60q7sIpR38EnHPSMDQ4MjDjLPozhAkGrVbr/z0ANjAF4AcbXmYAAAAASUVORK5CYII="
                                        alt="" style="width:20px;margin-right:5px;display:block">
                                </div>
                                <div class="weui-cell__bd">
                                    <p>七匹狼男士长筒袜</p>
                                </div>
                                <div class="weui-cell__ft">
                                    <span class="price">￥35.00</span>
                                    <div class="weui-count">
                                        <a class="weui-count__btn weui-count__decrease"></a>
                                        <input class="weui-count__number" type="number" value="2" style="width:1.5rem">
                                        <a class="weui-count__btn weui-count__increase"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="weui-cell__ft">
                            <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout" href="javascript:">删除</a>
                            <a class="weui-swiped-btn weui-swiped-btn_default close-swipeout" href="javascript:">关闭</a>
                        </div>
                    </div>
                    <div class="weui-cell weui-cell_swiped">
                        <div class="weui-cell__bd">
                            <div class="weui-cell">
                                <div class="weui-cell__hd">
                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAAVFBMVEXx8fHMzMzr6+vn5+fv7+/t7e3d3d2+vr7W1tbHx8eysrKdnZ3p6enk5OTR0dG7u7u3t7ejo6PY2Njh4eHf39/T09PExMSvr6+goKCqqqqnp6e4uLgcLY/OAAAAnklEQVRIx+3RSRLDIAxE0QYhAbGZPNu5/z0zrXHiqiz5W72FqhqtVuuXAl3iOV7iPV/iSsAqZa9BS7YOmMXnNNX4TWGxRMn3R6SxRNgy0bzXOW8EBO8SAClsPdB3psqlvG+Lw7ONXg/pTld52BjgSSkA3PV2OOemjIDcZQWgVvONw60q7sIpR38EnHPSMDQ4MjDjLPozhAkGrVbr/z0ANjAF4AcbXmYAAAAASUVORK5CYII="
                                        alt="" style="width:20px;margin-right:5px;display:block">
                                </div>
                                <div class="weui-cell__bd">
                                    <p>七匹狼男士长筒袜</p>
                                </div>
                                <div class="weui-cell__ft">
                                    <span class="price">￥200.00</span>
                                    <div class="weui-count">
                                        <a class="weui-count__btn weui-count__decrease"></a> 
                                        <input class="weui-count__number" type="number" value="2" style="width:1.5rem">
                                        <a class="weui-count__btn weui-count__increase"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="weui-cell__ft">
                            <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout" href="javascript:">删除</a>
                            <a class="weui-swiped-btn weui-swiped-btn_default close-swipeout" href="javascript:">关闭</a>
                        </div>
                    </div>
                    <div class="weui-cell weui-cell_swiped">
                        <div class="weui-cell__bd">
                            <div class="weui-cell">
                                <div class="weui-cell__hd">
                                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAAVFBMVEXx8fHMzMzr6+vn5+fv7+/t7e3d3d2+vr7W1tbHx8eysrKdnZ3p6enk5OTR0dG7u7u3t7ejo6PY2Njh4eHf39/T09PExMSvr6+goKCqqqqnp6e4uLgcLY/OAAAAnklEQVRIx+3RSRLDIAxE0QYhAbGZPNu5/z0zrXHiqiz5W72FqhqtVuuXAl3iOV7iPV/iSsAqZa9BS7YOmMXnNNX4TWGxRMn3R6SxRNgy0bzXOW8EBO8SAClsPdB3psqlvG+Lw7ONXg/pTld52BjgSSkA3PV2OOemjIDcZQWgVvONw60q7sIpR38EnHPSMDQ4MjDjLPozhAkGrVbr/z0ANjAF4AcbXmYAAAAASUVORK5CYII="
                                        alt="" style="width:20px;margin-right:5px;display:block">
                                </div>
                                <div class="weui-cell__bd">
                                    <p>七匹狼男士长筒袜</p>
                                </div>
                                <div class="weui-cell__ft">
                                    <span class="price">￥100.00</span>
                                    <div class="weui-count">
                                        <a class="weui-count__btn weui-count__decrease"></a>
                                        <input class="weui-count__number" type="number" value="2" style="width:1.5rem">
                                        <a class="weui-count__btn weui-count__increase"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="weui-cell__ft">
                            <a class="weui-swiped-btn weui-swiped-btn_warn delete-swipeout" href="javascript:" >删除</a>
                            <a class="weui-swiped-btn weui-swiped-btn_default close-swipeout" href="javascript:">关闭</a>
                        </div>
                    </div>
                </div>
            </div>
            <p class="summary">
                2 件商品, 共计
                <strong>123.5</strong> 元
            </p>
        </div>
    </div>
    <style>
        .summary {
            padding: 8px;
            text-align: right;
            background-color: white;
        }

        .price {
            font-size: .9em;
            margin-right: 6px;
        }
    </style>

    <script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/jquery-weui.min.js"></script>
    <!-- <script src="../lib/fastclick.js"></script> -->
    <!-- <script>
        $(function () {
            FastClick.attach(document.body);
        });
    </script> -->
    <script src="../js/jquery-weui.js"></script>

    <script>
        console.log($('a').attr('href'))
        var max = 99,
            min = 1;
        $('.weui-count__decrease').click(function (e) {
            var $input = $(e.currentTarget).parent().find('.weui-count__number');
            var number = parseInt($input.val() || "0") - 1
            if (number < min) number = min;
            $input.val(number)
            provice();
        })
        $('.weui-count__increase').click(function (e) {
            var $input = $(e.currentTarget).parent().find('.weui-count__number');
            var number = parseInt($input.val() || "0") + 1
            if (number > max) number = max;
            $input.val(number)
            provice();
        })
        // $('.weui-count__number').focus(function(){
        //     console.log(123)
        //     provice();
        // })
        $('.weui-count__number').blur(function(){
            provice();
        })
       

        function provice() {
            var pri = document.querySelectorAll('.price');
            var inp = document.querySelectorAll('.weui-count__number');
            var arr = [];
            var price = [];
            for (var j = 0; j < pri.length; j++) {
                price.push(Number($(pri[j]).text().slice(1)))
            }
            for (var i = 0; i < inp.length; i++) {
                arr.push(Number($(inp[i]).val()))
            }

            function getResult(a, b) {
                var c = [];
                d = 0;
                kv=0;
                if (a.length === b.length) {
                    for (var i = 0; i < a.length; i++) {
                        c[i] = a[i] * b[i];
                        kv+=a[i];
                    }
                    for (var i = 0; i < c.length; i++) {
                        d += c[i]
                    }
                }
                return c;
            }
            getResult(arr, price);
            $('.summary').text(kv+'件商品, 共计'+d+'元')
            // $('.summary strong').text(d)
        }
        provice();
        // setInterval("provice()","1000");
    </script>


</body>

</html>